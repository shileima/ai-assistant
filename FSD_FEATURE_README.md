# FSD环境切换功能说明

## 功能概述

当用户访问 `https://fsd.sankuai.com/workbench` 时，环境切换助手会自动检测并生成对应的FSD环境配置，提供便捷的环境切换功能。

## 功能特性

### 1. 自动检测
- 当检测到用户访问FSD工作台页面时，自动识别并生成FSD环境配置
- 无需手动配置，开箱即用

### 2. 环境配置
系统自动生成以下三个环境的配置：

| 环境 | 域名 | 说明 |
|------|------|------|
| **生产环境** | `https://fsd.sankuai.com` | FSD正式生产环境 |
| **预发环境** | `https://fsd.waimai.st.sankuai.com` | FSD预发布环境 |
| **测试环境** | `https://fsd.waimai.test.sankuai.com` | FSD测试环境 |

### 3. 智能切换
- 保持当前页面的路径、查询参数和锚点
- 一键切换到目标环境
- 自动关闭弹窗，提升用户体验

## 使用方法

### 步骤1：访问FSD工作台
在浏览器中访问：`https://fsd.sankuai.com/workbench`

### 步骤2：打开环境切换助手
点击浏览器工具栏中的环境切换助手图标

### 步骤3：查看FSD环境配置
在设置面板中，您将看到自动生成的FSD环境配置：
- 环境名称（只读）
- 匹配模式（只读）
- 基础URL（只读）
- 切换按钮

### 步骤4：切换环境
点击对应环境的"切换到[环境名]"按钮即可完成环境切换

## 技术实现

### 前端逻辑
- `isFSDPage()`: 检测当前页面是否为FSD工作台
- `renderFSDEnvironmentConfig()`: 渲染FSD环境配置界面
- `switchToFSDEnvironment()`: 处理FSD环境切换

### 后端逻辑
- `handleFSDEnvironmentSwitch()`: 处理FSD环境切换请求
- 自动构建目标URL并更新当前标签页

### 样式设计
- 独特的紫色主题，区分于普通环境配置
- 响应式设计，适配不同屏幕尺寸
- 悬停和点击效果，提升交互体验

## 注意事项

1. **URL保持**: 切换环境时会保持当前页面的路径、查询参数和锚点
2. **只读配置**: FSD环境配置为系统自动生成，不可编辑
3. **权限要求**: 需要Chrome扩展的标签页访问权限
4. **兼容性**: 支持Chrome 88+版本

## 故障排除

### 常见问题

**Q: 为什么没有显示FSD环境配置？**
A: 请确认当前访问的URL包含 `https://fsd.sankuai.com/workbench`

**Q: 环境切换失败怎么办？**
A: 请检查网络连接，确保目标环境可访问

**Q: 如何恢复到普通环境配置？**
A: 访问非FSD页面或刷新扩展即可恢复

## 更新日志

### v1.0.0 (2025-01-02)
- ✨ 新增FSD环境自动检测功能
- ✨ 新增FSD环境配置自动生成
- ✨ 新增FSD环境一键切换功能
- 🎨 新增FSD主题样式设计
- 📱 优化移动端显示效果
