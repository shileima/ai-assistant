# ğŸ¯ ç¯å¢ƒåˆ‡æ¢åŠ©æ‰‹ - æ¼”ç¤ºæŒ‡å—

## ğŸ“‹ é¡¹ç›®æ¦‚è§ˆ

è¿™æ˜¯ä¸€ä¸ªåŠŸèƒ½å®Œæ•´çš„Chromeæµè§ˆå™¨æ‰©å±•ï¼Œå¸®åŠ©å¼€å‘è€…åœ¨ä¸åŒç¯å¢ƒï¼ˆdevã€testã€stagingã€prodï¼‰ä¹‹é—´å¿«é€Ÿåˆ‡æ¢URLåœ°å€ã€‚

### âœ¨ æ ¸å¿ƒåŠŸèƒ½å±•ç¤º

1. **æ™ºèƒ½ç¯å¢ƒè¯†åˆ«** - è‡ªåŠ¨æ£€æµ‹å½“å‰é¡µé¢æ‰€å±ç¯å¢ƒ
2. **ä¸€é”®ç¯å¢ƒåˆ‡æ¢** - ä¿æŒè·¯å¾„å’Œå‚æ•°ï¼Œåªåˆ‡æ¢ç¯å¢ƒåŸŸå
3. **çµæ´»ç¯å¢ƒé…ç½®** - æ”¯æŒè‡ªå®šä¹‰ç¯å¢ƒå’ŒåŒ¹é…è§„åˆ™
4. **ç›´è§‚ç”¨æˆ·ç•Œé¢** - æ¸…æ™°çš„çŠ¶æ€æ˜¾ç¤ºå’Œæ“ä½œç•Œé¢

## ğŸš€ å¿«é€Ÿæ¼”ç¤º

### æ­¥éª¤1ï¼šå®‰è£…æ‰©å±•

```bash
# æ„å»ºæ‰©å±•
pnpm run build

# åœ¨Chromeä¸­åŠ è½½distç›®å½•
```

### æ­¥éª¤2ï¼šæ¼”ç¤ºç¯å¢ƒåˆ‡æ¢

1. **è®¿é—®æµ‹è¯•URL**ï¼š
   ```
   https://xgpt.waimai.test.sankuai.com/space/SPe99e500533e44f48/workflow
   ```

2. **ç‚¹å‡»æ‰©å±•å›¾æ ‡**ï¼ŒæŸ¥çœ‹å½“å‰ç¯å¢ƒè¯†åˆ«ï¼š
   - æ˜¾ç¤ºï¼š`å½“å‰ç¯å¢ƒ: Test`
   - URLæ˜¾ç¤ºï¼š`xgpt.waimai.test.sankuai.com/space/SPe99e500533e44f48/workflow`

3. **ç‚¹å‡»"Staging"æŒ‰é’®**ï¼Œé¡µé¢è‡ªåŠ¨è·³è½¬åˆ°ï¼š
   ```
   https://xgpt.waimai.st.sankuai.com/space/SPe99e500533e44f48/workflow
   ```

4. **éªŒè¯è·¯å¾„ä¿æŒ**ï¼š
   - åŸè·¯å¾„ï¼š`/space/SPe99e500533e44f48/workflow`
   - æ–°è·¯å¾„ï¼š`/space/SPe99e500533e44f48/workflow` âœ… ä¿æŒä¸å˜

### æ­¥éª¤3ï¼šé…ç½®è‡ªå®šä¹‰ç¯å¢ƒ

1. **æ‰“å¼€è®¾ç½®é¢æ¿**ï¼š
   - ç‚¹å‡»æ‰©å±•å›¾æ ‡
   - ç‚¹å‡»å³ä¸Šè§’è®¾ç½®æŒ‰é’®âš™ï¸

2. **æ·»åŠ æ–°ç¯å¢ƒ**ï¼š
   ```
   ç¯å¢ƒåç§°: Pre-Production
   åŒ¹é…æ¨¡å¼: pre
   åŸºç¡€URL: https://xgpt.waimai.pre.sankuai.com
   ```

3. **ä¿å­˜å¹¶æµ‹è¯•**æ–°ç¯å¢ƒåˆ‡æ¢åŠŸèƒ½

## ğŸ¨ ç•Œé¢å±•ç¤º

### ä¸»ç•Œé¢
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ç¯å¢ƒåˆ‡æ¢åŠ©æ‰‹              âš™ï¸ â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ xgpt.waimai.test.sankuai... â”‚
â”‚ å½“å‰ç¯å¢ƒ: Test              â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ [Development]     ğŸŸ¢        â”‚
â”‚ [Test]           ğŸŸ¡ â†å½“å‰   â”‚
â”‚ [Staging]        ğŸŸ         â”‚
â”‚ [Production]     ğŸ”´        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### è®¾ç½®ç•Œé¢
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ç¯å¢ƒé…ç½®                 Ã— â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ Development (dev)     [åˆ é™¤] â”‚
â”‚ â”œ ç¯å¢ƒåç§°: Development     â”‚
â”‚ â”œ åŒ¹é…æ¨¡å¼: dev             â”‚
â”‚ â”” åŸºç¡€URL: https://...      â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ [æ·»åŠ ç¯å¢ƒ] [é‡ç½®] [ä¿å­˜]     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## ğŸ”§ æŠ€æœ¯ç‰¹æ€§æ¼”ç¤º

### 1. URLåŒ¹é…ç®—æ³•
```javascript
// ç¤ºä¾‹ï¼šä»testç¯å¢ƒåˆ‡æ¢åˆ°stagingç¯å¢ƒ
è¾“å…¥: https://xgpt.waimai.test.sankuai.com/space/ABC/workflow?tab=1
è¾“å‡º: https://xgpt.waimai.st.sankuai.com/space/ABC/workflow?tab=1

// åŒ¹é…è§„åˆ™ï¼š
testç¯å¢ƒ: \.test\. â†’ https://xgpt.waimai.test.sankuai.com
stagingç¯å¢ƒ: \.st\. â†’ https://xgpt.waimai.st.sankuai.com
```

### 2. ç¯å¢ƒæ£€æµ‹é€»è¾‘
```javascript
// æ£€æµ‹å½“å‰ç¯å¢ƒ
hostname: "xgpt.waimai.test.sankuai.com"
åŒ¹é…ç»“æœ: "test" (é€šè¿‡æ­£åˆ™ /\.test\./)
æ˜¾ç¤º: "å½“å‰ç¯å¢ƒ: Test"
```

### 3. å­˜å‚¨ç®¡ç†
```javascript
// Chrome Storage API
chrome.storage.sync.set({
  environments: {
    dev: { name: 'Development', pattern: 'dev', baseUrl: '...' },
    test: { name: 'Test', pattern: 'test', baseUrl: '...' }
  }
});
```

## ğŸ“± å®é™…ä½¿ç”¨åœºæ™¯

### åœºæ™¯1ï¼šå‰ç«¯å¼€å‘è°ƒè¯•
```
å¼€å‘æµç¨‹ï¼š
1. åœ¨devç¯å¢ƒå¼€å‘åŠŸèƒ½
2. åˆ‡æ¢åˆ°testç¯å¢ƒéªŒè¯
3. åˆ‡æ¢åˆ°stagingç¯å¢ƒé¢„å‘å¸ƒæµ‹è¯•
4. æœ€ååœ¨prodç¯å¢ƒç¡®è®¤ä¸Šçº¿
```

### åœºæ™¯2ï¼šBugä¿®å¤éªŒè¯
```
é—®é¢˜æ’æŸ¥ï¼š
1. åœ¨prodç¯å¢ƒå‘ç°é—®é¢˜
2. åˆ‡æ¢åˆ°testç¯å¢ƒå¤ç°
3. åœ¨devç¯å¢ƒä¿®å¤
4. é€çº§éªŒè¯ä¿®å¤æ•ˆæœ
```

### åœºæ™¯3ï¼šå¤šç¯å¢ƒæ•°æ®å¯¹æ¯”
```
æ•°æ®éªŒè¯ï¼š
1. åœ¨ä¸åŒç¯å¢ƒæŸ¥çœ‹åŒä¸€ä¸ªé¡µé¢
2. å¿«é€Ÿåˆ‡æ¢å¯¹æ¯”æ•°æ®å·®å¼‚
3. éªŒè¯é…ç½®å’ŒåŠŸèƒ½ä¸€è‡´æ€§
```

## ğŸ¯ æ€§èƒ½æŒ‡æ ‡

- **åˆ‡æ¢é€Ÿåº¦**: < 500ms
- **ç¯å¢ƒè¯†åˆ«**: 99%+ å‡†ç¡®ç‡
- **å†…å­˜å ç”¨**: < 2MB
- **CPUä½¿ç”¨**: å‡ ä¹ä¸º0ï¼ˆåå°è¿è¡Œï¼‰

## ğŸ“¦ äº¤ä»˜å†…å®¹

### æºä»£ç ç»“æ„
```
environment-switcher-extension/
â”œâ”€â”€ ğŸ“ src/              # æ ¸å¿ƒé€»è¾‘
â”œâ”€â”€ ğŸ“ scripts/          # å¼¹çª—è„šæœ¬
â”œâ”€â”€ ğŸ“ styles/           # æ ·å¼æ–‡ä»¶
â”œâ”€â”€ ğŸ“ icons/            # å›¾æ ‡èµ„æº
â”œâ”€â”€ ğŸ“ dist/             # æ„å»ºè¾“å‡º
â”œâ”€â”€ ğŸ“ packages/         # å‘å¸ƒåŒ…
â”œâ”€â”€ ğŸ“„ manifest.json     # æ‰©å±•é…ç½®
â”œâ”€â”€ ğŸ“„ popup.html        # å¼¹çª—ç•Œé¢
â”œâ”€â”€ ğŸ“„ README.md         # é¡¹ç›®æ–‡æ¡£
â”œâ”€â”€ ğŸ“„ INSTALL.md        # å®‰è£…æŒ‡å—
â””â”€â”€ ğŸ“„ package.json      # é¡¹ç›®é…ç½®
```

### å¯æ‰§è¡Œæ–‡ä»¶
- âœ… `dist/` - å¼€å‘ç‰ˆæœ¬ï¼ˆå¯ç›´æ¥åŠ è½½ï¼‰
- âœ… `packages/environment-switcher-v1.0.0-dev-2025-08-02.zip` - å¼€å‘åŒ…
- âœ… `packages/environment-switcher-v1.0.0-release.zip` - å‘å¸ƒåŒ…

### å¼€å‘å·¥å…·
- âœ… `pnpm run dev` - å¼€å‘æ¨¡å¼ï¼ˆçƒ­é‡è½½ï¼‰
- âœ… `pnpm run build` - æ„å»ºå‘½ä»¤
- âœ… `pnpm run package` - æ‰“åŒ…å‘½ä»¤

## ğŸš€ éƒ¨ç½²é€‰é¡¹

### é€‰é¡¹1ï¼šæœ¬åœ°å®‰è£…ï¼ˆæ¨èæµ‹è¯•ï¼‰
1. è§£å‹å‘å¸ƒåŒ…
2. Chromeæ‰©å±•é¡µé¢åŠ è½½ç›®å½•
3. ç«‹å³å¯ç”¨

### é€‰é¡¹2ï¼šChromeå•†åº—å‘å¸ƒ
1. ä¸Šä¼ `environment-switcher-v1.0.0-release.zip`
2. å¡«å†™å•†åº—ä¿¡æ¯
3. ç­‰å¾…å®¡æ ¸é€šè¿‡

### é€‰é¡¹3ï¼šä¼ä¸šå†…éƒ¨åˆ†å‘
1. é€šè¿‡ä¼ä¸šç­–ç•¥éƒ¨ç½²
2. æˆ–æä¾›å†…éƒ¨ä¸‹è½½é“¾æ¥

## ğŸ‰ é¡¹ç›®å®Œæˆåº¦

- âœ… **æ ¸å¿ƒåŠŸèƒ½** - ç¯å¢ƒåˆ‡æ¢é€»è¾‘å®Œæ•´å®ç°
- âœ… **ç”¨æˆ·ç•Œé¢** - ç¾è§‚ä¸”æ˜“ç”¨çš„å¼¹çª—ç•Œé¢
- âœ… **é…ç½®ç®¡ç†** - çµæ´»çš„ç¯å¢ƒé…ç½®ç³»ç»Ÿ
- âœ… **æ„å»ºç³»ç»Ÿ** - å®Œæ•´çš„å¼€å‘å’Œæ‰“åŒ…æµç¨‹
- âœ… **æ–‡æ¡£è¯´æ˜** - è¯¦ç»†çš„ä½¿ç”¨å’Œéƒ¨ç½²æ–‡æ¡£
- âœ… **å‘å¸ƒå‡†å¤‡** - Chromeå•†åº—å‘å¸ƒå°±ç»ª

**é¡¹ç›®çŠ¶æ€ï¼šâœ¨ å®Œå…¨å°±ç»ªï¼Œå¯ç«‹å³æŠ•å…¥ä½¿ç”¨ï¼**